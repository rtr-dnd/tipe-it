<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Tipe | Editor made simpler</title>
  <meta name="description" content="Tipeは、どの端末からでも書けるノートです。データはクラウドに自動保存。面倒なフォルダ分けも一切なし。書くことだけに集中して。" />
  <link rel="icon" href="./src/assets/fabicon.png" sizes="16x16" type="image/png" />
  <link rel="icon" href="./src/assets/fabicon.png" sizes="32x32" type="image/png" />
  <link rel="icon" href="./src/assets/fabicon.png" sizes="48x48" type="image/png" />
  <link rel="icon" href="./src/assets/fabicon.png" sizes="62x62" type="image/png" />
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP|Roboto&display=swap" rel="stylesheet">
  <meta property="og:url" content="https://tipe-it.web.app" />
  <meta property="og:title" content="Tipe | Editor made simpler" />
  <meta property="og:description" content="Tipeは、どの端末からでも書けるノートです。データはクラウドに自動保存。面倒なフォルダ分けも一切なし。書くことだけに集中して。" />
  <meta property="og:image" content="./src/assets/ogp.png" />


  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-firestore.js"></script>

  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase.js"></script>

  <script type="text/javascript">
    var firebaseConfig = {
      apiKey: "AIzaSyDrZeNpMEIMsS7jo2IHg93-gUBOBQnh2gg",
      authDomain: "tipe-it.firebaseapp.com",
      databaseURL: "https://tipe-it.firebaseio.com",
      projectId: "tipe-it",
      storageBucket: "tipe-it.appspot.com",
      messagingSenderId: "151138394945",
      appId: "1:151138394945:web:c87a588b9c9fcc10"
    };
    firebase.initializeApp(firebaseConfig);

  </script>
  <script src="https://cdn.firebase.com/libs/firebaseui/2.4.1/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.4.1/firebaseui.css" />
  <script type="text/javascript">
    // FirebaseUI config.
    var uiConfig = {
      signInSuccessUrl: '/',
      signInOptions: [
        // Leave the lines as is for the providers you want to offer your users.
        firebase.auth.GoogleAuthProvider.PROVIDER_ID,
        //firebase.auth.FacebookAuthProvider.PROVIDER_ID,
        //firebase.auth.TwitterAuthProvider.PROVIDER_ID,
        //firebase.auth.GithubAuthProvider.PROVIDER_ID,
        //firebase.auth.EmailAuthProvider.PROVIDER_ID,
        //firebase.auth.PhoneAuthProvider.PROVIDER_ID
      ],
      // Terms of service url.
      tosUrl: ''
    };

    // Initialize the FirebaseUI Widget using Firebase.
    var ui = new firebaseui.auth.AuthUI(firebase.auth());
    // The start method will wait until the DOM is loaded.
    var currentUID;
    firebase.auth().onAuthStateChanged(function (user) {
      if (user) {
        // User is signed in.
      } else {
        if (location.pathname == "/") {
          location.pathname = "/get-started"
        }
      }
    });
    if (location.pathname == "/get-started") {
      ui.start('#firebaseui-auth-container', uiConfig);
    }

    var db = firebase.firestore();

    var signout = function () {
      firebase.auth().signOut().then(function () {
        location.pathname = "/get-started"
      }).catch(function (error) {
        console.log('error occurred')
      });
    };
    var deleteAccount = function () {
      var user = firebase.auth().currentUser;
      console.log(user.uid);
      var credential;
      var provider = new firebase.auth.GoogleAuthProvider();
      firebase.auth().signInWithPopup(provider).then(function (result) {
        // This gives you a Google Access Token. You can use it to access the Google API.
        credential = result.credential;
        user.reauthenticateWithCredential(credential).then(function () {
          // User re-authenticated.
          db.collection('users').doc(user.uid).delete().then(function () {
            console.log('document deleted')
            user.delete()
          })
          // location.pathname = "/get-started"
        })
      })
    };

  </script>
  <title>vue-editor</title>
</head>

<body>
  <div id="app"></div>
  <!-- built files will be auto injected -->
</body>

</html>
